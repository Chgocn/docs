> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [juejin.cn](https://juejin.cn/post/6953598441817636900#heading-13)

> æ¬¢è¿å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼š[FSA å…¨æ ˆè¡ŒåŠ¨ ğŸ‘‹](https://link.juejin.cn?target=https%3A%2F%2Fp3-juejin.byteimg.com%2Ftos-cn-i-k3u1fbpfcp%2F31960a996f1f4b0da35d69ab7480f7d6~tplv-k3u1fbpfcp-zoom-1.image "https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31960a996f1f4b0da35d69ab7480f7d6~tplv-k3u1fbpfcp-zoom-1.image")

"jCenter ä¸ä¹…åå°†åœæ­¢æœåŠ¡" è¿™ä¸ªæ¶ˆæ¯å¯¹æ‰€æœ‰ Android å¼€å‘è€…çš„å½±å“æ˜¯å¾ˆå¤§çš„ï¼Œå¾ˆå¤šå¥½ç”¨çš„ç¬¬ä¸‰æ–¹åº“éƒ½ä¼šä¸Šä¼ åˆ° jCenterï¼Œè€Œä¸”å‡ ä¹æ‰€æœ‰çš„ Android é¡¹ç›®é‡Œéƒ½ä¼šä¾èµ–åˆ° jCenter ä»“åº“ï¼Œè¿™æ„å‘³ç€ Android å¼€å‘è€…å¯¹å…¶æœ‰å¾ˆå¼ºçš„ä¾èµ–æ€§ã€‚ä½œä¸ºç¬¬ä¸‰æ–¹åº“ä½¿ç”¨è€…æ¥è¯´ï¼Œä¸€æ—¦åˆ°äº† jCenter åœæœé‚£æ—¶ï¼Œåªæœ‰ 2 ç§é€‰æ‹©ï¼š

1.  ä½¿ç”¨é˜¿é‡Œç­‰ç¬¬ä¸‰æ–¹ä»£ç†ä»“åº“ï¼ˆä¸Šé¢å¯èƒ½ä¼šç¼“å­˜ç€è¿™äº›æ›¾ç»æ‰˜ç®¡åœ¨ jCenter ä¸Šçš„ç¬¬ä¸‰æ–¹åº“ï¼‰
2.  ç¥ˆç¥·ç¬¬ä¸‰æ–¹åº“ä½œè€…èƒ½æ—©æ—¥åŒæ­¥åº“åˆ° MavenCentral

> ä»¥ä¸‹æ˜¯å…¶ä»–äººå¯¹ jCenter åœæœäº‹ä»¶çš„çœ‹æ³•æ–‡ç« æ¨èï¼Œæœ‰å…´è¶£å¯ä»¥å»çœ‹çœ‹ï¼š  
> [ã€Šæµ…è°ˆ JCenter å³å°†è¢«åœæ­¢æœåŠ¡çš„äº‹ä»¶ã€‹](https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fguolin_blog%2Farticle%2Fdetails%2F115873573 "https://blog.csdn.net/guolin_blog/article/details/115873573")

å›å½’ä¸»é¢˜ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“å¼€å‘è€…ï¼Œä¸”ä¹‹å‰æ²¡æœ‰ä¸Šä¼ åº“åˆ° MavenCentral ç»éªŒçš„è¯ï¼Œæœ¬æ–‡å¯ä»¥åŠ©ä½ æ—©æ—¥ä¸Šä¼ åº“åˆ° MavenCentral~

ä¸€ã€Sonatype è´¦å·
-------------

### 1ã€æ³¨å†Œ Sonatype

MavenCentral å’Œ Sonatype çš„å…³ç³»ç›¸å½“äº jCenter å’Œ jForgï¼š

<table><thead><tr><th align="left">åº“å¹³å°</th><th align="left">è¿è¥å•†</th><th align="left">ç®¡ç†åå°</th></tr></thead><tbody><tr><td align="left">jCenter</td><td align="left">jForg</td><td align="left">bintray.com</td></tr><tr><td align="left">MavenCentral</td><td align="left">Sonatype</td><td align="left">oss.sonatype.org</td></tr></tbody></table>

> æ³¨æ„ï¼šæœ€æ–°ç®¡ç†åå°é“¾æ¥æ˜¯ï¼š`s01.oss.sonatype.org`ï¼Œè¯¦æƒ…è§ [central.sonatype.org/publish/relâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fcentral.sonatype.org%2Fpublish%2Frelease%2F "https://central.sonatype.org/publish/release/")

æ‰€ä»¥ï¼Œåœ¨ä¸Šä¼ åº“åˆ° MavenCentral ä¹‹å‰ï¼Œéœ€è¦å…ˆæ³¨å†Œç™»å½• Sonatypeï¼Œè®¿é—® [issues.sonatype.org](https://link.juejin.cn?target=https%3A%2F%2Fissues.sonatype.org "https://issues.sonatype.org") :

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/03effe283dd445418e8ee706ec005a01~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å¦‚æœä½ å·²ç»æœ‰è´¦å·ï¼Œåˆ™ç›´æ¥ç™»å½•ï¼Œå¦åˆ™ç‚¹å‡» `Sign up` è¿›å…¥æ³¨å†Œé¡µé¢ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1080f2a718a46fdb283e9e515d7a98e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å¡«å†™å¥½è´¦å·ã€å¯†ç ã€é‚®ç®±ç­‰ä¿¡æ¯å³å¯æ³¨å†ŒæˆåŠŸï¼Œæ³¨å†ŒæˆåŠŸåå†ç™»å½• Sonatypeã€‚

> æ³¨æ„ï¼šé‚®ç®±å¾ˆé‡è¦ï¼Œå»ºè®®æ˜¯ä½ å¸¸ç”¨çš„é‚®ç®±ï¼Œæ‰èƒ½åŠæ—¶æ”¶åˆ° Sonatype åœ¨ issue ä¸­ç»™ä½ çš„ç­”å¤ä¿¡æ¯æé†’ã€‚

### 2ã€ç”³è¯·ä¸Šä¼ æƒé™

ç°åœ¨ä½ å·²ç»æœ‰ Sonatype è´¦å·äº†ï¼Œæ¥ä¸‹æ¥ç†åº”å°±æ˜¯å€ŸåŠ© grdle è„šæœ¬ç» ç®¡ç†åå° (`s01.oss.sonatype.org`) æŠŠåº“ä¸Šä¼ åˆ° MavenCentral ï¼Œä½†æ˜¯ï¼ŒSonatype æ–°ç”¨æˆ·é»˜è®¤æ˜¯æ²¡æœ‰è¿™ä¸ªæƒé™çš„ï¼Œä¸ä¿¡ä½ å¯ä»¥è®¿é—® [s01.oss.sonatype.org](https://link.juejin.cn?target=https%3A%2F%2Fs01.oss.sonatype.org%2F "https://s01.oss.sonatype.org/") åï¼Œç‚¹å‡»å³ä¸Šè§’ "Log In" ç™»å½•è¯•è¯•çœ‹ï¼Œä¼šæç¤ºæ²¡æœ‰æƒé™ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ad1b48628b34e06a8ae179454f5a810~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

> æ³¨æ„ï¼šå‡ºç°è¿™ä¸ªå¼¹çª—æœ‰ 2 ç§å¯èƒ½ï¼Œä¸€ç§æ˜¯è´¦å·å¯†ç é”™è¯¯ï¼Œå¦ä¸€ç§æ²¡æœ‰æƒé™ã€‚

æ‰€ä»¥ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦è®© Sonatype ç»™æˆ‘ä»¬å¼€é€šè¿™ä¸ªæƒé™ï¼Œå›åˆ°ç™»å½•æˆåŠŸåè·³è½¬çš„é‚£ä¸ªé¡µé¢ [issues.sonatype.org](https://link.juejin.cn?target=https%3A%2F%2Fissues.sonatype.org%2F "https://issues.sonatype.org/")ï¼Œç‚¹å‡»é¡¶éƒ¨çš„ `æ–°å»º` æŒ‰é’®ï¼Œå¡«å†™é¡¹ç›®ä¿¡æ¯ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f638634a7c80410a89eaa786fa399f50~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

> æ³¨æ„ï¼šå›¾ä¸­æ˜¯æˆ‘ä¸ªäººé¡¹ç›®ä¿¡æ¯ï¼Œåªæ˜¯ä¸¾ä¾‹ï¼Œä¸è¦ç…§æŠ„ï¼ï¼

è¿™ä¸ªæ­¥éª¤ä¸­ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯ `Group Id`ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š

*   æ— ç½‘ç«™åŸŸåï¼šå¯ä»¥ç›´æ¥ä½¿ç”¨ github çš„å­åŸŸå `io.github.username`ï¼Œæ¯”å¦‚æˆ‘çš„ github è´¦å·åæ˜¯ GitLqrï¼Œé‚£ä¹ˆå¯ä»¥å¡«å†™ `io.github.gitlqr`ã€‚
*   æœ‰ç½‘ç«™åŸŸåï¼šå¯ä»¥å¡«å†™ä¸ªäººæˆ–å…¬å¸åŸŸåï¼Œæ¯”å¦‚ï¼š`com.gitlqr`ï¼Œå¦å¤–ï¼Œè¿˜éœ€è¦åœ¨ DNS é…ç½®ä¸­é…ç½®ä¸€ä¸ª TXT è®°å½•æ¥éªŒè¯åŸŸåæ‰€æœ‰æƒï¼Œå…·ä½“è¯·çœ‹ï¼š[central.sonatype.org/pages/produâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fcentral.sonatype.org%2Fpages%2Fproducers.html "https://central.sonatype.org/pages/producers.html")

> æ³¨æ„ï¼šç›®å‰å·²ç»ä¸èƒ½å†ä½¿ç”¨ `com.github` åŸŸåäº†ï¼Œå…·ä½“åŸå› è¯·çœ‹ï¼š[central.sonatype.org/changelog/#â€¦](https://link.juejin.cn?target=https%3A%2F%2Fcentral.sonatype.org%2Fchangelog%2F%232021-04-01-comgithub-is-not-supported-anymore-as-a-valid-coordinate "https://central.sonatype.org/changelog/#2021-04-01-comgithub-is-not-supported-anymore-as-a-valid-coordinate")ï¼›ä½¿ç”¨è‡ªå·±çš„ç½‘ç«™åŸŸåæ—¶ï¼Œå»ºè®®å†™é¡¶çº§åŸŸåï¼Œä¸éœ€è¦å…·ä½“åˆ°æŸä¸ªé¡¹ç›®çš„å­åŸŸåï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œ`Group Id` åªéœ€è¦ç”³è¯·ä¸€æ¬¡ï¼Œä»¥åä½ çš„å…¶ä»–åº“éƒ½ä½¿ç”¨åŒä¸€ä¸ª `Group Id` å³å¯ã€‚

å¡«å†™ä¿¡æ¯åï¼Œç‚¹å‡» "æ–°å»º" æŒ‰é’®ï¼Œå¼€å¯ä¸€ä¸ª issueï¼Œä¼šæ˜¾ç¤º `wait for response`ï¼Œç­‰å¾… Sonatype å·¥ä½œäººå‘˜å®¡æ ¸å›å¤ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/38b5be24d7714b14890f27e4ee2f05eb~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å› ä¸º Sonatype æ˜¯å›½å¤–è¿è¥ï¼Œæ‰€ä»¥å·¥ä½œæ—¶é—´ä¸Šä¼šæœ‰æ—¶å·®ï¼Œæˆ‘ä»¬éœ€è¦è€å¿ƒç­‰å¾… Sonatype å·¥ä½œäººå‘˜å¤„ç†è¿™ä¸ª issueï¼Œæ¯”å¦‚æˆ‘è¿™æ ·ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8b4669d1ba4e4d89975f2a47aae63601~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

> æ³¨æ„ï¼šå¦‚æœä½ æƒ³å°½å¿«ä¸Šä¼ åº“ï¼Œé‚£ä¹ˆå‰é¢å·²ç»æåˆ°äº†ï¼Œè¯·ä½¿ç”¨ä½ å¸¸ç”¨çš„é‚®ç®±ï¼Œå½“ Sonatype å·¥ä½œäººå‘˜è¯„è®ºæ—¶ï¼Œä¼šç¬¬ä¸€æ—¶é—´é€šè¿‡é‚®ä»¶é€šçŸ¥åˆ°ä½ ã€‚

äºŒã€Gradle é…ç½®
-----------

é¦–æ¬¡å‘ Sonatype ç”³è¯·ä¸Šä¼ æƒé™å¯èƒ½ä¼šæœ‰ç‚¹ä¹…ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ­¥å¤„ç† gradle é…ç½®ã€‚

### 1ã€Maven æäº¤è„šæœ¬

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª `maven-publish.gradle` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

> æ³¨æ„ï¼šä»¥ä¸‹å†…å®¹æ˜¯é€šç”¨é…ç½®ï¼Œç›´æ¥æ‹·è´å³å¯ã€‚

```
if (project.hasProperty("android")) { // Android libraries
    task sourcesJar(type: Jar) {
        classifier = 'sources'
        from android.sourceSets.main.java.srcDirs
    }

    task javadoc(type: Javadoc) {
        // https://github.com/novoda/bintray-release/issues/71
        excludes = ['**/*.kt'] // < ---- Exclude all kotlin files from javadoc file.
        source = android.sourceSets.main.java.srcDirs
        classpath += project.files(android.getBootClasspath().join(File.pathSeparator))
        options.encoding = "utf-8"
        options.charSet = "utf-8"
    }
} else { // Java libraries
    task sourcesJar(type: Jar, dependsOn: classes) {
        classifier = 'sources'
        from sourceSets.main.allSource
    }
}

// å¼ºåˆ¶ Java/JavaDoc ç­‰çš„ç¼–ç ä¸º UTF-8
tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
}

tasks.withType(Javadoc) {
    options.encoding = "UTF-8"
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

// add javadoc/source jar tasks as artifacts
artifacts {
    archives javadocJar
    archives sourcesJar
}

apply plugin: 'maven'
apply plugin: 'signing'


//Properties properties = new Properties()
//properties.load(project.rootProject.file('local.properties').newDataInputStream())
//
//def ossrhUsername = properties.getProperty("ossrhUsername")
//def ossrhPassword = properties.getProperty("ossrhPassword")

def PUBLISH_GROUP_ID = publishedGroupId //è¿™é‡Œå¯ä»¥ä¸æ˜¯ç›´æ¥ç”³è¯·æ—¶å€™çš„groupIdåªè¦å¼€å¤´æ˜¯å°±å¯ä»¥

def PUBLISH_ARTIFACT_ID = artifact

def PUBLISH_VERSION = libraryVersion // android.defaultConfig.versionName //è¿™ä¸ªæ˜¯ç›´æ¥è·å–çš„åº“gradleé‡Œé…ç½®å¥½çš„ç‰ˆæœ¬å·ï¼Œä¸ç”¨åˆ°å¤„ä¿®æ”¹ç‰ˆæœ¬å·ï¼Œåªéœ€è¦ç»´æŠ¤ä¸€ä»½å°±å¯ä»¥ã€‚

//ç­¾å
signing {
    required { gradle.taskGraph.hasTask("uploadArchives") }
    sign configurations.archives
}

uploadArchives {
    repositories {
        mavenDeployer {

            beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }

            repository(url: "https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/") {
                authentication(userName: ossrhUsername, password: ossrhPassword)
            }

            snapshotRepository(url: "https://s01.oss.sonatype.org/content/repositories/snapshots/") {
                authentication(userName: ossrhUsername, password: ossrhPassword)
            }

            pom.groupId = PUBLISH_GROUP_ID
            pom.artifactId = PUBLISH_ARTIFACT_ID
            pom.version = PUBLISH_VERSION

            pom.project {
                packaging 'aar' //æˆ‘è¿™é‡Œå‘å¸ƒçš„æ˜¯å®‰å“çš„åŒ…ï¼Œæ‰€æœ‰å†™çš„aar

                name libraryName // 'å‘å¸ƒåº“çš„ç®€å•åç§°'
                // optionally artifactId can be defined here
                description libraryDescription // 'å‘å¸ƒåŒ…çš„æè¿°'
                url siteUrl // 'å¯ä»¥å†™å…¬å¸å®˜ç½‘åœ°å€æˆ–githubä¸ªäººé¡µé¢åœ°å€'

                scm {
                    connection gitUrl // 'scm:æ›¿æ¢æˆé¡¹ç›®gitåœ°å€'
                    developerConnection gitUrl // 'scm:æ›¿æ¢ä¸ºgitå¼€å¤´çš„é¡¹ç›®åœ°å€'
                    url siteUrl // 'é¡¹ç›®é¦–é¡µï¼Œå¯ä»¥æ˜¯githubé¡¹ç›®çš„ä¸»é¡µ'
                }

                licenses {
                    license {
                        name licenseName // 'The Apache License, Version 2.0'
                        url licenseUrl // 'http://www.apache.org/licenses/LICENSE-2.0.txt'
                    }
                }

                developers {
                    developer {
                        id developerId // 'è¿™é‡Œå¡«å†™ç”³è¯·è´¦å·æ—¶å€™çš„å…¨åå°±å¯ä»¥'
                        name developerName // 'è¿™é‡Œéšæ„å¡«å†™å°±å¯ä»¥'
                        email developerEmail// 'æœ€å¥½æ˜¯ç”³è¯·è´¦å·æ—¶ç”¨çš„é‚®ç®±'
                    }
                }
            }
        }
    }
}
å¤åˆ¶ä»£ç 

```

### 2ã€Maven åº“ä¿¡æ¯é…ç½®

åº“ä¿¡æ¯å…±ç”¨ä¸¤å¤„é…ç½®ï¼š

*   é€šç”¨ä¿¡æ¯ï¼šå¡«å†™åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `gradle.prperties` æ–‡ä»¶ä¸­ã€‚
*   Module ä¿¡æ¯ï¼šå¡«å†™åœ¨å…·ä½“ Module ç›®å½•ä¸‹çš„ `build.gradle` æ–‡ä»¶ä¸­ã€‚

#### é€šç”¨ä¿¡æ¯ `gradle.prperties` é…ç½®

```
publishedGroupId=ä½ ç”³è¯·æƒé™æ—¶å¡«å†™çš„GroupId
siteUrl=é¡¹ç›®url
gitUrl=gité“¾æ¥
developerId=è´¦å·id
developerName=è´¦å·id
developerEmail=é‚®ç®±

licenseName=The Apache Software License, Version 2.0
licenseUrl=http://www.apache.org/licenses/LICENSE-2.0.txt
allLicenses=["Apache-2.0"]
å¤åˆ¶ä»£ç 

```

å…·ä½“å¯å‚è€ƒ [github.com/GitLqr/Liteâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGitLqr%2FLiteARouter%2Fblob%2Fmain%2Fgradle.properties "https://github.com/GitLqr/LiteARouter/blob/main/gradle.properties")

#### Module ä¿¡æ¯ `build.gradle` é…ç½®

```
ext {
    artifact = 'åº“çš„å”¯ä¸€æ ‡è¯†'
    libraryName = 'å‘å¸ƒåº“çš„ç®€å•åç§°'
    libraryDescription = 'å‘å¸ƒåŒ…çš„æè¿°'
    libraryVersion = 'å‘å¸ƒåº“çš„ç‰ˆæœ¬å·'
}
å¤åˆ¶ä»£ç 

```

å…·ä½“å¯å‚è€ƒ [github.com/GitLqr/Liteâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGitLqr%2FLiteARouter%2Fblob%2Fmain%2Flitearouter-api%2Fbuild.gradle "https://github.com/GitLqr/LiteARouter/blob/main/litearouter-api/build.gradle")

### 3ã€å¯¼å…¥ Maven è„šæœ¬

åœ¨åº“å¯¹åº”çš„ Module ç›®å½•ä¸‹çš„`build.gradle`æ–‡ä»¶åº•éƒ¨æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```
apply from: '../maven-publish.gradle'
å¤åˆ¶ä»£ç 

```

åœ¨ AS ä¸­ `Sync Now` ä¸€ä¸‹ Gradleï¼Œå°±å¯ä»¥åœ¨ Gradle é¢æ¿ä¸­çœ‹åˆ°å¤šäº†ä¸€ä¸ª `upload/uploadArchives` ä»»åŠ¡äº†ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d0ea63f38544e228434d215698730d1~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ä¸‰ã€GPG ç­¾å
--------

é€šè¿‡ä»¥ä¸Šä¸¤æ­¥ä¹‹åï¼Œè¿˜å·®æœ€åä¸€æ­¥ï¼Œæ­¤æ—¶ä½ è¿è¡Œ `uploadArchives` ä»»åŠ¡æ˜¯æ— æ³•æ­£å¸¸æäº¤çš„ï¼ŒMavenCentral æäº¤è¿˜éœ€è¦é…ç½® GPG ç­¾åæ–‡ä»¶ã€‚

### 1ã€ä½¿ç”¨ Gpg4win ç”Ÿæˆ GPG å¯†é’¥

> æ³¨æ„ï¼šä»¥ä¸‹ç”Ÿæˆ GPG å¯†é’¥çš„æ“ä½œæµç¨‹ä½¿ç”¨çš„æ˜¯ Window ç¯å¢ƒï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Macï¼Œè¯·å‚è€ƒï¼š[www.jianshu.com/p/1c715203câ€¦](https://link.juejin.cn?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F1c715203c7c6 "https://www.jianshu.com/p/1c715203c7c6")

å…ˆåˆ° [www.gpg4win.org/get-gpg4winâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fwww.gpg4win.org%2Fget-gpg4win.html "https://www.gpg4win.org/get-gpg4win.html") ä¸‹è½½å®‰è£…å¥½ Gpg4winï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/52d8b6a2b23c489d91848019f6764173~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å¯åŠ¨ Gpg4winï¼Œç‚¹å‡» "æ–‡ä»¶" - "æ–°å»ºå¯†é’¥å¯¹..."ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7f11f6384a07456293b201aa767c4efa~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

åˆ›å»ºä¸ªäºº OpenPGP å¯†é’¥å¯¹ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3eef6a8af21c447487d4d6f5c7222718~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å¡«å†™è´¦å·ã€é‚®ç®±ï¼Œå¹¶å‹¾é€‰ `Protect the generated key with a passphrase`ï¼š

> æ³¨æ„ï¼šåœ¨é«˜çº§è®¾ç½®é‡Œå¯ä»¥è®¾ç½®æ›´è¯¦ç»†çš„ï¼Œä¾‹å¦‚è¿‡æœŸæ—¶é—´ï¼Œä½†è¿‡æœŸæ—¶é—´ä¸å¯ä»¥å¤ªé•¿ï¼Œæˆ–æŠ¥é”™ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a6cb48084bd4eba9e340196b09bf463~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ç‚¹å‡» "æ–°å»º"ï¼Œ è®¾ç½®å¯†ç ï¼ˆç¡®è®¤å¯†ç ï¼‰ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b7028a728852475b8b128cc836d44a32~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ç­‰å¾…ç”Ÿæˆå¯†é’¥åï¼Œå‡ºç°å¦‚ä¸‹å¼¹çª—ï¼Œç‚¹å‡» "å®Œæˆ"ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c595a55a37cf4be68e153138d08d863a~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

åœ¨ä¸»ç•Œé¢åŒå‡»åˆšåˆšåˆ›å»ºå¥½çš„å¯†é’¥ï¼Œä¼šå‡ºç°å¦‚ä¸‹å¼¹çª—ï¼Œéœ€è¦æŠŠåº•éƒ¨çš„é‚£ 8 ä¸ªå­—ç¬¦å¤åˆ¶ä¸‹æ¥ï¼Œåœ¨åé¢çš„ã€é…ç½®å¯†é’¥ã€‘ç¯èŠ‚ä¼šç”¨åˆ°ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01b7dae684e94a50b054bd47b234d224~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

åœ¨ä¸»ç•Œé¢å³å‡»åˆšåˆšåˆ›å»ºå¥½çš„å¯†é’¥ï¼Œç‚¹å‡» "åœ¨æœåŠ¡å™¨ä¸Šå‘å¸ƒ..."ï¼Œç„¶åä¸€è·¯ç¡®å®šï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9959ab6ef49a45458caceb51e2d4ebb4~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

åœ¨ä¸»ç•Œé¢å³å‡»åˆšåˆšåˆ›å»ºå¥½çš„å¯†é’¥ï¼Œç‚¹å‡» "å¯¼å‡º..."ï¼Œè¿™æ—¶æ³¨æ„äº†ï¼Œä¸€å®šè¦åœ¨è¿™é‡Œå…ˆæŠŠæ–‡ä»¶åæ”¹æˆ "gpg" æˆ–è€… "pgp"ï¼Œå†ç‚¹ä¿å­˜ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/89a2644aba934a8fbf2f7b3a4bc4dcef~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

æ³¨æ„äº†ï¼ŒGpg4win çš„å¯¼å‡ºåˆ†ä¸ºä¸¤ç§ï¼š

*   `"å¯¼å‡º..."`: å¯¼å‡ºå…¬é’¥
*   `"Backup Secret Keys"`: å¯¼å‡º `ç§é’¥` !!

> æç¤ºï¼šåç»­æ­¥éª¤éœ€è¦ç”¨åˆ°çš„æ˜¯ `ç§é’¥`ï¼Œæ‰€ä»¥éœ€è¦ç‚¹ `"Backup Secret Keys"` å¯¼å‡ºç§é’¥çš„ gpg æ–‡ä»¶ï¼›å¯¼å‡ºæ—¶é»˜è®¤æ–‡ä»¶åç¼€æ˜¯ "asc"ï¼Œä¸€å®šè¦åœ¨è¿™æ—¶ä¿®æ”¹åç¼€ä¸º "gpg"ï¼Œè¿™æ ·æ‰èƒ½ç”Ÿæˆæ­£ç¡®çš„ `äºŒè¿›åˆ¶ gpg å¯†é’¥æ–‡ä»¶`ã€‚å¦‚æœå…ˆä¿å­˜æˆ `asc æ–‡æœ¬æ–‡ä»¶`ï¼Œå†ä¿®æ”¹æˆ gpg æ˜¯æ²¡æœ‰ç”¨çš„ï¼ï¼ï¼

### 2ã€é…ç½®å¯†é’¥

è¿™ä¸€æ­¥å¾ˆå…³é”®ï¼Œéœ€è¦åœ¨ç”µè„‘ `ç”¨æˆ·ç›®å½•` ä¸‹çš„ `.gradle/gradle.properties` ä¸­é…ç½®å¦‚ä¸‹å†…å®¹ï¼š

> æ¯”å¦‚ï¼š`C:\Users\CharyLin\.gradle\gradle.properties`

```
# MavenCentral
signing.keyId=åˆšæ‰è·å–çš„å¯†é’¥å8ä½
signing.password=ä¹‹å‰æˆ‘ä»¬æ‰§è¡Œå‘½ä»¤æ—¶è®¾ç½®çš„å¯†ç 
signing.secretKeyRingFile=åˆšæ‰ç”Ÿæˆçš„gpgæ–‡ä»¶è·¯å¾„
ossrhUsername=sonatypeç”¨æˆ·å
ossrhPassword=sonatypeå¯†ç 
å¤åˆ¶ä»£ç 

```

å››ã€å‘å¸ƒ
----

### 1ã€ä¸Šä¼ æ¡£æ¡ˆ (uploadArchives)

åˆ°äº†è¿™ä¸€æ­¥ï¼Œå°±å¯ä»¥å» Gradle é¢æ¿ä¸­åŒå‡»æ‰§è¡Œ `uploadArchives` ä»»åŠ¡äº†ï¼ŒæˆåŠŸçš„è¯ï¼Œä¼šå‡ºç°å¦‚ä¸‹æ—¥å¿—ï¼š

```
11:12:00: Executing task 'uploadArchives'...

...

> Task :litearouter-api:sourcesJar UP-TO-DATE
> Task :litearouter-api:signArchives UP-TO-DATE
> Task :litearouter-api:uploadArchives

...

BUILD SUCCESSFUL in 16s
23 actionable tasks: 1 executed, 22 up-to-date
11:12:16: Task execution finished 'uploadArchives'.
å¤åˆ¶ä»£ç 

```

å¦‚æœå‡ºç° `Unable to read secret key from file: it may not be a PGP secret key ring` çš„é”™è¯¯ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§å¯èƒ½ï¼š

*   GPG è´¦å·ã€å¯†ç æœ‰è¯¯
*   ä½¿ç”¨çš„æ˜¯ GPG å…¬é’¥æ–‡ä»¶
*   ä½¿ç”¨çš„æ˜¯ GPG å¯†é’¥æ–‡ä»¶ï¼Œä½†æ˜¯æ˜¯å…ˆä¿å­˜æˆ asc æ–‡ä»¶åä¿®æ”¹æˆ gpg æ–‡ä»¶

```
FAILURE: Build failed with an exception.

* What went wrong:
Could not evaluate onlyIf predicate for task ':litearouter-annotation:signArchives'.
> Unable to read secret key from file: D:\CharyLinDatas\GitLqr\secret.gpg (it may not be a PGP secret key ring)

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.

* Get more help at https://help.gradle.org

BUILD FAILED in 11s
å¤åˆ¶ä»£ç 

```

### 2ã€å‘å¸ƒæ¡£æ¡ˆ

ç°åœ¨å¯ä»¥å»ç™»å½•ä¸‹çš„ç®¡ç†åå° [s01.oss.sonatype.org/](https://link.juejin.cn?target=https%3A%2F%2Fs01.oss.sonatype.org%2F "https://s01.oss.sonatype.org/"), ç„¶åç‚¹å‡»å·¦ä¾§çš„ "Staging Repositories":

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/364a90f8782e495aaf48116a1127b678~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

é€‰ä¸­åˆšä¸Šä¼ çš„åŒ…, åº•éƒ¨çš„ `Content` é€‰é¡¹å¡ä¸‹, å¯ä»¥çœ‹åˆ°åŒ…å†…çš„æ–‡ä»¶æœ‰å“ªäº›:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4f765c085f24a2da3a9ec1a64dd3e3b~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ç¡®å®šæ— è¯¯å, ç‚¹å‡» "Close", å¡«å†™æè¿°ä¿¡æ¯, ç„¶åç‚¹å‡» "Confirm":

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23547b3b02644087baa73c450183764c~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

æ­£å¸¸æƒ…å†µä¸‹, ç­‰å¾…å‡ åˆ†é’Ÿå, `Activity` é€‰é¡¹å¡ä¸­å‡ºç°å¯¹å·çš„ "Repository closed" å°±æ˜¯ close æˆåŠŸäº†:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/99d2658a174f4e8ea4d7822341030be6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ç„¶åå†ç‚¹å‡» "Release" æŒ‰é’®å³å¯å‘å¸ƒåˆ° MavenCentral, ç­‰å¾…å‡ ä¸ªå°æ—¶åå¯ä»¥åœ¨ [search.maven.org/](https://link.juejin.cn?target=https%3A%2F%2Fsearch.maven.org%2F "https://search.maven.org/") æŸ¥è¯¢å‘å¸ƒç»“æœã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0878e06c62cd423d916914de99c53724~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

> å› ä¸º Release æ—¶å‹¾é€‰äº† "Automatically Drop" é€‰é¡¹, æ‰€ä»¥å½“åŒ…å‘å¸ƒæˆåŠŸä¹‹åä¼šè‡ªåŠ¨ä» Staging Repository ä¸­åˆ é™¤ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯, å¦‚æœä½ çš„åº“æœ‰å¥½å‡ ä¸ª component, åƒæˆ‘çš„é¡¹ç›®å°±åŒ…å«äº† `litearouter-annotation` ã€`litearouter-api` ã€`litearouter-compiler` ä¸‰ä¸ª, åˆ‡è®°ä¸€ä¸ªä¸€ä¸ªæŒ‰æµç¨‹æ¥, æ¯”å¦‚:

*   `litearouter-annotation`: upload --> close --> release
*   `litearouter-api`: upload --> close --> release
*   `litearouter-compiler`: upload --> close --> release

ä¸è¦ä¸€æ¬¡æ€§å…¨éƒ¨ upload, ç„¶ååˆä¸€æ¬¡æ€§ close, æœ€åå†ä¸€æ¬¡æ€§ release, è¿™ç§åšæ³•ä¸ç¡®å®šä¼šå¸¦æ¥ä»€ä¹ˆåæœ, å»ºè®®ä¸è¦è¿™æ ·æã€‚

äº”ã€è¡¥å……
----

### 1ã€`Group Id` æ˜¯ä»€ä¹ˆ

gradle ä¸­ä¼šä½¿ç”¨ `implementation` æ¥ä¾èµ–æŸä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œç»“æ„ä¸ºï¼š`implementation GroupId:ArtifactId:Version`ï¼š

> æ¯”å¦‚ï¼š`implementation 'com.android.support:appcompat-v7:27.1.1'`

<table><thead><tr><th align="left">ç»„æˆéƒ¨åˆ†</th><th align="left">è§£é‡Š</th></tr></thead><tbody><tr><td align="left">GroupId</td><td align="left">æ˜¯é¡¹ç›®ç»„ç»‡çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä¸€èˆ¬å¯¹åº” JAVA çš„åŒ…çš„ç»“æ„ï¼Œå°±æ˜¯ main ç›®å½•é‡Œ java çš„ç›®å½•ç»“æ„ï¼Œå¦‚ â€˜com.android.supportâ€™ã€‚</td></tr><tr><td align="left">ArtifactId</td><td align="left">æ˜¯é¡¹ç›®çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä¸€èˆ¬å¯¹åº”é¡¹ç›®çš„åç§°ï¼Œå°±æ˜¯é¡¹ç›®æ ¹ç›®å½•çš„åç§°, ä¾‹ï¼šappcompat-v7ã€‚</td></tr><tr><td align="left">Version</td><td align="left">æ˜¯é¡¹ç›®çš„ç‰ˆæœ¬å·ï¼Œä¾‹ï¼š1.0-SNAPSHOT ã€‚å…¶ä¸­ 1.0 æ˜¯ç‰ˆæœ¬å·ï¼ŒSNAPSHOT ç‰ˆæœ¬ä»£è¡¨ä¸ç¨³å®šã€å°šå¤„äºå¼€å‘ä¸­çš„ç‰ˆæœ¬ã€‚è€Œè¡ç”Ÿçš„æœ‰ Release ç‰ˆæœ¬åˆ™ä»£è¡¨ç¨³å®šçš„ç‰ˆæœ¬</td></tr></tbody></table>

> æ³¨æ„ï¼šè¿™é‡Œè¯´çš„æ˜¯ GroupId `ä¸€èˆ¬` å¯¹åº”åŒ…ç»“æ„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ`GroupId` ä¸ `åŒ…å` æ˜¯å¯ä»¥ä¸ä¸€æ ·çš„ã€‚å°±åƒ Android é¡¹ç›®é‡Œçš„ `applicationId` è·Ÿ `åŒ…å` æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µä¸€æ ·ã€‚

å‚è€ƒèµ„æ–™
----

*   [Android åº“å‘å¸ƒåˆ° Maven Central å…¨æ”»ç•¥](https://link.juejin.cn?target=https%3A%2F%2Fxiaozhuanlan.com%2Ftopic%2F6174835029 "https://xiaozhuanlan.com/topic/6174835029")
*   [Android å‘å¸ƒåº“åˆ° MavenCentral è¯´æ˜ä»¥åŠè¸©å‘è§£å†³](https://link.juejin.cn?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F1c715203c7c6 "https://www.jianshu.com/p/1c715203c7c6")

> å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©, è¯·ä¸åç‚¹å‡»å…³æ³¨ä¸€ä¸‹æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼š[FSA å…¨æ ˆè¡ŒåŠ¨](https://link.juejin.cn?target=https%3A%2F%2Fp3-juejin.byteimg.com%2Ftos-cn-i-k3u1fbpfcp%2F31960a996f1f4b0da35d69ab7480f7d6~tplv-k3u1fbpfcp-zoom-1.image "https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31960a996f1f4b0da35d69ab7480f7d6~tplv-k3u1fbpfcp-zoom-1.image"), è¿™å°†æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ¿€åŠ±. å…¬ä¼—å·ä¸ä»…æœ‰ Android æŠ€æœ¯, è¿˜æœ‰ iOS, Python ç­‰æ–‡ç« , å¯èƒ½æœ‰ä½ æƒ³è¦äº†è§£çš„æŠ€èƒ½çŸ¥è¯†ç‚¹å“¦~